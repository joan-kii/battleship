(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{14:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var r,n=a(0),s=a(1),c=a.n(s),i=a(8),o=a.n(i),l=(a(14),a(4)),u=a(2),h=a(3),p=function(e){var t=e.playerCells,a=e.startGame?"Tu Flota":"Posiciona tus Barcos";return Object(n.jsxs)("div",{className:"playerPlace",children:[Object(n.jsx)("h2",{className:"placeName",children:a}),Object(n.jsx)("div",{className:"grid",children:t})]})},d=function(e){var t=e.computerCells,a=e.startGame,r=a?"grid grid-computer":"grid-computer-none";return Object(n.jsxs)("div",{className:"computerPlace",children:[a&&Object(n.jsx)("h2",{className:"placeName",children:"Flota Enemiga"}),Object(n.jsx)("div",{className:r,children:t})]})},f=function(e){var t=[];return{name:e?"Ordenador":"Jugador 1",shoot:function(a){if(e)for(var r=!0;r;){var n=(s=100,Math.round(Math.random()*s));t.includes(n)||(t.push(n),r=!1)}else{if(t.includes(a))return"choose again";t.push(a)}var s;return t},spotsShooted:t}},j=function(e){var t=e.playerTurn,a=e.winner,r="Ordenador"===a?"Has sido derrotado...":"\xa1\xa1\xa1Victoria!!!",s=["\xa1Vamos!","\xa1Al ataque!","\xa1S\xed!","\xa1Dispara!","Tu turno","\xa1A por ellos!"],c=["\xa1Atenci\xf3n!","\xa1Te atacan!","\xa1Cuidado!","\xa1Oh, no!","\xa1Resiste!","\xa1No te rindas!"],i=t?s[Math.floor(Math.random()*s.length)]:c[Math.floor(Math.random()*c.length)];return Object(n.jsxs)("div",{className:"grid-infoZone",children:[a&&Object(n.jsxs)("div",{className:"winner",children:[Object(n.jsx)("h3",{className:"turnDisplay",children:r}),Object(n.jsx)("button",{className:"replayButton",onClick:function(){return window.location.reload()},children:"Volver a jugar"})]}),!a&&Object(n.jsx)("p",{className:"messages",children:i})]})},m=f(!1),b=f(!0),v=function(e){var t=e.playerCells,a=e.computerCells,r=e.playerGameboard,i=e.computerGameboard,o=e.startGame,h=a.map((function(e){return c.a.cloneElement(e,{onClick:function(){return function(e){if(P.current&&!N.current){if(m.shoot(parseInt(e.key)),i.receiveAttack(parseInt(e.key)),"spot"===e.props.className){var t=c.a.cloneElement(e,{className:"miss"},null);T.splice(parseInt(e.key),1,t),F(Object(l.a)(T))}else{var a=c.a.cloneElement(e,{className:"boom"},null);T.splice(parseInt(e.key),1,a),F(Object(l.a)(T))}E(),S(!1)}}(e)}},null)}));Object(s.useEffect)((function(){return G(t)}),[t]);var f=Object(s.useState)(!1),v=Object(u.a)(f,2),O=v[0],g=v[1],N=Object(s.useRef)();N.current=O;var y=Object(s.useState)(!0),x=Object(u.a)(y,2),k=x[0],S=x[1],P=Object(s.useRef)();P.current=k;var A=Object(s.useState)(""),C=Object(u.a)(A,2),w=C[0],D=C[1],E=function(){var e=i.checkSunkenShips(),t=r.checkSunkenShips();(e||t)&&g(!0),e&&D(m.name),t&&D(b.name)},I=Object(s.useState)(t),M=Object(u.a)(I,2),z=M[0],G=M[1],L=Object(s.useState)(h),H=Object(u.a)(L,2),T=H[0],F=H[1];return Object(s.useEffect)((function(){if(!k&&!O){b.shoot();var e=setTimeout((function(){!function(e){if(r.receiveAttack(e),"spot"===z[e].props.className){var t=c.a.cloneElement(z[e],{className:"miss"},null);z.splice(z[e].key,1,t),G(Object(l.a)(z))}else{var a=c.a.cloneElement(z[e],{className:"boom"},null);z.splice(z[e].key,1,a),G(Object(l.a)(z))}E(),S(!0)}(b.spotsShooted[b.spotsShooted.length-1])}),600);return function(){return clearTimeout(e)}}})),Object(n.jsxs)("div",{className:"game",children:[Object(n.jsx)("h2",{className:"gameTitle",children:"Hundir la Flota"}),Object(n.jsxs)("div",{className:"playground",children:[Object(n.jsx)(p,{playerCells:z,startGame:o}),Object(n.jsx)(d,{computerCells:T,startGame:o})]}),o&&Object(n.jsx)(j,{playerTurn:k,winner:w})]})},O=function(e){var t=e.renderPlayerFleet,a=e.shipAlreadyPlaced,r=e.setStartGame,s=Object(n.jsx)("h3",{className:"rotateMessage",children:"Haz doble click para girar el barco"}),c=Object(n.jsxs)("div",{className:"readyMessage",children:[Object(n.jsx)("h3",{children:"\xa1A Jugar!"}),Object(n.jsx)("button",{className:"button startGame",onClick:function(){return r(!0)},children:"Comenzar"})]});return Object(n.jsxs)("div",{className:"grid-playerZone",children:[a?c:s,Object(n.jsx)("div",{className:"fleet",children:t})]})},g=function(){return Object(n.jsxs)("div",{className:"footer",children:[Object(n.jsx)("a",{href:"https://www.theodinproject.com",target:"_blank",rel:"noreferrer",children:"The Odin Project"}),Object(n.jsx)("a",{href:"https://github.com/joan-kii/battleship",target:"_blank",rel:"noreferrer",children:"Joankii's Repo"})]})},N=function(e){if(/Destructor|Crucero|Submarino|Acorazado|Portaviones/.test(e)){var t=e,a=[],r=0;switch(t){case"Destructor":r=2;break;case"Crucero":case"Submarino":r=3;break;case"Acorazado":r=4;break;case"Portaviones":r=5;break;default:r=2}return{shipName:t,shipLength:r,shipPosition:[],hit:function(e){a.push(e)},isSunk:function(){return r===a.length}}}throw new Error("pass a string with one of the ship names with the first letter capitalized: Destructor, Crucero, Submarino, Acorazado or Portaviones")},y=function(){var e=[N("Destructor"),N("Crucero"),N("Submarino"),N("Acorazado"),N("Portaviones")],t=[];return{shipsArray:e,missedShots:t,placeShip:function(e,t,a){for(var r=0;r<e.shipLength;r++)a?e.shipPosition.push(t+r):e.shipPosition.push(t+10*r);return e.shipPosition},receiveAttack:function(a){var r,n=!1,s=Object(h.a)(e);try{for(s.s();!(r=s.n()).done;){var c=r.value;c.shipPosition.includes(a)&&(n=!0,c.hit(a))}}catch(i){s.e(i)}finally{s.f()}return n||t.push(a),t},checkSunkenShips:function(){var t,a=[],r=Object(h.a)(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;n.isSunk()&&a.push(n)}}catch(s){r.e(s)}finally{r.f()}return a.length===e.length}}},x=y(),k=y(),S=[],P=function e(t,a,r){for(var n=Math.random()<.5,s=[],c=n?10:1,i=Math.abs(Math.floor(Math.random()*(100-c*a.shipLength))),o=0;o<a.shipLength;o++)n?s.push(i+o):s.push(i+10*o);var l=s.some((function(e){return r.includes(e)})),u=s.slice(0,a.shipLength-1),h=s.slice(1,a.shipLength),p=u.some((function(e){return e%10===9})),d=h.some((function(e){return e%10===0})),f=s.some((function(e){return e>99}));if(!(l||p||d||f))return s.forEach((function(e){return r.push(e)})),t.placeShip(a,s[0],n);e(t,a,r)},A=Object(h.a)(k.shipsArray);try{for(A.s();!(r=A.n()).done;){var C=r.value;P(k,C,S)}}catch(K){A.e(K)}finally{A.f()}var w,D=[],E=k.shipsArray,I=[],M=Object(h.a)(E);try{for(M.s();!(w=M.n()).done;){var z=w.value;I.push({ship:z.shipName,positions:z.shipPosition})}}catch(K){M.e(K)}finally{M.f()}!function(e){for(var t=0;t<100;t++)D.push(Object(n.jsx)("div",{id:t,className:"spot"},t));var a,r=Object(h.a)(e);try{for(r.s();!(a=r.n()).done;){var s,c=a.value,i=Object(h.a)(c.positions);try{for(i.s();!(s=i.n()).done;){var o=s.value;D[o]=Object(n.jsx)("div",{id:o,className:c.ship},o)}}catch(K){i.e(K)}finally{i.f()}}}catch(K){r.e(K)}finally{r.f()}}(I);var G,L,H,T,F=x.shipsArray,J=function(e){for(var t=[],a=0;a<e.shipLength;a++)t.push(Object(n.jsx)("div",{id:"".concat(e.shipName,"-").concat(a)},a)),e.lastIdDiv=a;return t},R=F.map((function(e,t){return e.isHorizontal=!0,e.lastIdDiv=0,Object(n.jsx)("div",{id:e.shipName,className:"ship ".concat(e.shipName,"-container"),draggable:"true",onDoubleClick:function(t){return function(e,t){t.isHorizontal?e.className="ship ".concat(t.shipName,"-container-vertical"):e.className="ship ".concat(t.shipName,"-container"),t.isHorizontal=!t.isHorizontal}(t.target.parentNode,e)},onMouseDown:function(e){return B(e)},onDragStart:function(t){return V(t,e)},onDragEnd:function(e){return _(e)},children:J(e)},t)})),B=function(e){L=e.target.id,L=parseInt(L.substr(-1))},V=function(e,t){G=t,H=e.target,T=H.children.length},Z=function(e){e.stopPropagation(),e.preventDefault()},_=function(e){0!==G.shipPosition.length&&e.target.remove()},q=function(){var e=[],t=Object(s.useState)(function(){for(var e,t=[],a=0;a<100;a++)e=Object(n.jsx)("div",{id:a,className:"spot",onDragOver:function(e){return Z(e)},onDrop:function(e){return h(e)}},a),t.push(e);return t}()),a=Object(u.a)(t,2),r=a[0],i=a[1],o=Object(l.a)(r),h=function(t){t.preventDefault();var a=G.shipLength-1;if(G.isHorizontal){for(var n=[],s=0;s<T;s++)n.push(parseInt(t.target.id)-L+s);var u=n.some((function(t){return e.includes(t)})),h=parseInt(t.target.id)-L+(G.shipLength-1),p=[0,10,20,30,40,50,60,70,80,90,1,11,21,31,41,51,61,71,81,91,2,12,22,32,42,52,62,72,82,92,3,13,23,33,43,53,63,73,83,93].splice(0,10*a);if(!(h>99||p.includes(h)||u))for(var d=0;d<T;d++){var f=parseInt(t.target.id)-L+d,m=c.a.cloneElement(r[f],{className:"taken"},null);o.splice(f,1,m),e.push(f),G.shipPosition.push(f)}}else{if(G.isHorizontal)return;for(var b=[],v=0;v<T;v++)b.push(parseInt(t.target.id)-10*L+10*v);var O=b.some((function(t){return e.includes(t)})),g=parseInt(t.target.id)-10*(L-(G.shipLength-1)),N=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,14,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49].splice(0,10*a);if(!(g>99||N.includes(g)||O))for(var y=0;y<T;y++){var x=parseInt(t.target.id)-10*L+10*y,k=c.a.cloneElement(r[x],{className:"taken"},null);o.splice(x,1,k),e.push(x),G.shipPosition.push(x)}}17===e.length&&j(!0),i(Object(l.a)(o))},p=Object(s.useState)(!1),d=Object(u.a)(p,2),f=d[0],j=d[1],m=Object(s.useState)(!1),b=Object(u.a)(m,2),N=b[0],y=b[1];return Object(n.jsxs)("main",{className:"App",children:[Object(n.jsx)(v,{playerCells:r,computerCells:D,playerGameboard:x,computerGameboard:k,startGame:N}),Object(n.jsx)("div",{className:"info-container",children:!N&&Object(n.jsx)(O,{renderPlayerFleet:R,shipAlreadyPlaced:f,setStartGame:y})}),Object(n.jsx)("footer",{children:Object(n.jsx)(g,{})})]})};o.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(q,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.8d6bedb2.chunk.js.map